<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        //1. 在JavaScript中，变量的作用域有全局作用域和局部作用域两种。
        //全局作用域（ 变量）： 整个程序都有效， 即整个代码中都可以调用（ 变量前面没有添加var变成全局的属性） 
        //局部作用域（ 变量）： 只对函数内部有效， 即只能在本变量声明的函数内部调用。

        //2.变量和函数的作用范围。
        //生存周期（变量生存的时间）对于全局变量是永久的，除非我们主动销毁这个全局变量。(或者浏览器垃圾回收机制回收)
        //而对于在函数内用 var 关键字声明的局部变量来说，当退出函数时，它们都会随着函数调用的结束而被销毁.

        // var a = 1; //全局变量，永久的
        // function fn() {
        //     var b = 2; //局部变量，函数外面无法获取，函数内部使用，随着函数调用的结束而被销毁

        //     function fn1() {
        //         console.log(b); //2
        //     }
        //     fn1();
        // }
        // fn();

        //3.函数外面获取函数内部的变量。
        function hehe() {
            var a = 1; //这里的变量a不会消失，一直存在。
            return function() {
                return a++;
            }
        }

        var fn = hehe(); //hehe的返回值是一个函数。
        console.log(fn()); //1  函数外面获取函数内部的变量，利用内部的函数进行返回 - 间接获取
        console.log(fn()); //2  函数内部的变量a一直存在，不是说函数调用完成就消失吗????
        console.log(fn()); //3
        console.log(fn()); //4
        console.log(fn()); //5

        //闭包的概念（函数嵌套函数）
        //闭包就是能够读取其他函数内部变量的函数。

        //4.垃圾回收机制 - 了解
        // 现在各大浏览器通常用采用的垃圾回收有两种方法：标记清除、引用计数
        //4.1标记清除
        // 当变量进入执行环境时，就标记这个变量为“进入环境”，当变量离开环境时，则将其标记为“离开环境”。垃圾收集器在运行的时候会给存储在内存中的所有变量都加上标记。
        //4.2引用计数
        // 引用计数的含义是跟踪记录每个值被引用的次数。
        // 当这个引用次数变成0时，则说明没有办法再访问这个值了，因而就可以将其所占的内存空间给收回来。
    </script>
</body>

</html>