<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

</body>
<script>
    // http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html

    //函数内部声明变量的时候，一定要使用var命令。如果不用的话，你实际上声明了一个全局变量！
    // function f1() {　　　　
    //     n = 999;　　
    // }
    // f1();
    // alert(n); // 999

    //出于种种原因，我们有时候需要得到函数内的局部变量。但是，前面已经说过了，正常情况下，这是办不到的，只有通过变通方法才能实现。
    //那就是在函数的内部，再定义一个函数。
    // function f1() {
    //     var n = 999;

    //     function f2() { //闭包　　　
    //         alert(n);　　　　
    //     }
    //     return f2;
    // }
    // var result = f1();
    // result(); // 999

    // 由于闭包会使得函数中的变量都被保存在内存中，内存消耗很大，所以不能滥用闭包，否则会造成网页的性能问题，在IE中可能导致内存泄露。解决方法是，在退出函数之前，将不使用的局部变量全部删除。
    // 闭包会在父函数外部，改变父函数内部变量的值。

    // var name = "The Window"; //全局变量
    // var object = {　　　　
    //     name: "My Object",
    //     getNameFunc: function() { //闭包　
    //         console.log(this); //object
    //         return function() {　　　
    //             console.log(this); //window　　　
    //             return this.name;　　　　　　
    //         };　　　　
    //     }　　
    // };
    // alert(object.getNameFunc()()); //The Window
    // var fn = object.getNameFunc(); //function() {return this.name; };　　　　
    // fn();

    // var name = "The Window";
    // var object = {　　　　
    //     name: "My Object",
    //     getNameFunc: function() {　　　　　　
    //         var that = this; //object　　　　　　
    //         return function() {　　　　　　　　
    //             return that.name; //object　　　　
    //         };　　　　
    //     }　　
    // };
    // alert(object.getNameFunc()()); //My Object
</script>
<script src="effect.js"></script>
<script>
    taobao.aliyingye.item3.zhangsan.tool();
</script>

</html>