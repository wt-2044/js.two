!function(o){var i=location.search.substring(1).split("=")[1],t=o("#smallpic"),e=o("#bpic"),l=o(".loadtitle"),c=o(".loadpcp"),i=i||1;o.ajax({url:"http://localhost/JS2008/taobaoitem_test/php/getsid.php",data:{sid:i},dataType:"json"}).done(function(i){console.log(i),t.attr("src",i.url),t.attr("sid",i.sid),e.attr("src",i.url),l.html(i.title),c.html(i.price);var i=i.piclisturl.split(","),s="";o.each(i,function(i,t){s+='<li><img src="'+t+'"/>></li>'}),o("#list ul").html(s)});var s=o("#spic"),a=o("#sf"),n=o("#bf"),r=o("#left"),h=o("#right");o("#list");a.width(s.width()*n.width()/e.width()),a.height(s.height()*n.height()/e.height());var d=e.width()/s.width();s.hover(function(){a.css("visibility","visible"),n.css("visibility","visible"),o(this).on("mousemove",function(i){var t=i.pageX-o(".goodsinfo").offset().left-a.width()/2,i=i.pageY-o(".goodsinfo").offset().top-a.height()/2;t<0?t=0:t>=s.width()-a.width()&&(t=s.width()-a.width()),i<0?i=0:i>=s.height()-a.height()&&(i=s.height()-a.height()),a.css({left:t,top:i}),e.css({left:-t*d,top:-i*d})})},function(){a.css("visibility","hidden"),n.css("visibility","hidden")}),o("#list ul").on("click","li",function(){var i=o(this).find("img").attr("src");t.attr("src",i),e.attr("src",i)});var f=6;h.on("click",function(){var i=o("#list ul li");i.size()>f&&(f++,r.css("color","#333"),i.size()==f&&h.css("color","#fff"),o("#list ul").animate({left:-(f-6)*i.eq(0).outerWidth(!0)}))}),r.on("click",function(){var i=o("#list ul li");6<f&&(f--,h.css("color","#333"),f<=6&&r.css("color","#fff"),o("#list ul").animate({left:-(f-6)*i.eq(0).outerWidth(!0)}))});var u=[],p=[];o(".p-btn a").on("click",function(){var i,t=o(this).parents(".goodsinfo").find("#smallpic").attr("sid");p=jscookie.get("cookiesid")&&jscookie.get("cookienum")?(u=jscookie.get("cookiesid").split(","),jscookie.get("cookienum").split(",")):(u=[],[]),-1!=o.inArray(t,u)?(i=parseInt(p[o.inArray(t,u)])+parseInt(o("#count").val()),p[o.inArray(t,u)]=i):(u.push(t),jscookie.add("cookiesid",u,10),p.push(o("#count").val())),jscookie.add("cookienum",p,10),alert("按钮触发了")})}(jQuery);